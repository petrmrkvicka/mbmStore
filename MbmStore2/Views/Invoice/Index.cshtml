@addTagHelper "*, Microsoft.AspNetCore.Mvc.TagHelpers"
@using MbmStore.Models;

@{
    ViewData["Title"] = "Invoices";
}


<h1>Invoices</h1>
<a asp-controller="Home" asp-action="Index">< Home</a>

<div class="card">
    <div class="row">
        <p><b>Customer</b></p>
        <p><b>Product</b></p>
        <p><b>Price</b></p>
    </div>
        @foreach (Invoice invoice in ViewBag.Invoices)
        {
            decimal price = 0M;
            <div class="row">
                <p>@invoice.Customer.FirstName @invoice.Customer.LastName</p>
                <p>@foreach (OrderItem product in invoice.OrderItems) {
                    <span>@product.Product.Title</span>
                }</p>
                <p>@foreach (OrderItem product in invoice.OrderItems) {
                    <span>@String.Format("{0:0.00}", product.Product.Price)</span>
                    price += product.Product.Price;
                }</p>
                <p></p>
                <p><b>Total:</b></p>
                <p><b>@String.Format("{0:0.00}", price)</b></p>
            </div>
        }
</div>


<style>
    body {
        max-width: 1200px;
        margin-left: auto;
        margin-right: auto
    }

    .card {
        border: 1px solid silver;
        border-radius: 5px;
        padding: 2em 0;
        margin: 1em 0
    }

    .row {
        display: flex;
        flex-wrap: wrap;
        padding: 1em 4em
    }

    .row p {
        margin: 0
    }

    .row:not(:last-child) {
        border-bottom: 1px dotted silver
    }

    .row p:nth-child(3n + 1) {
        width: 20%
    }

    .row p:nth-child(3n + 2) {
        width: 60%
    }

    .row p:nth-child(3 + 3) {
        width: 20%
    }

    .row p span {
        margin: 0 0 0.2em;
        display: block
    }
</style>